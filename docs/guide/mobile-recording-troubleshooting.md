# 手机录音功能故障排除指南

如果您在手机Chrome浏览器中遇到"录音启动失败"的问题，请按照以下步骤进行排查：

## 常见问题及解决方案

### 1. 权限问题（最常见）

**症状：** 点击录音按钮后提示"麦克风权限被拒绝"

**解决方案：**
1. 在Chrome浏览器地址栏查看是否有🔒、🎤或⚠️图标
2. 点击该图标，选择"网站设置"
3. 找到"麦克风"选项，设置为"允许"
4. 刷新页面重新尝试

### 2. HTTPS协议要求

**症状：** 提示"安全限制"或录音功能被禁用

**解决方案：**
- 确保访问的网址以`https://`开头
- 如果是`http://`，录音功能无法正常工作
- 联系网站管理员启用HTTPS

### 3. 设备兼容性问题

**症状：** 提示"未找到麦克风设备"

**解决方案：**
1. 检查手机麦克风是否正常工作（尝试录制语音消息）
2. 重启手机后重试
3. 更新Chrome浏览器到最新版本

### 4. 其他应用占用麦克风

**症状：** 提示"麦克风被其他应用占用"

**解决方案：**
1. 关闭所有正在使用麦克风的应用（如微信、QQ、录音软件等）
2. 确保没有其他浏览器标签页在使用麦克风
3. 重新尝试录音

### 5. 浏览器兼容性

**支持的浏览器：**
- Chrome 49+
- Firefox 29+
- Safari 14.1+
- Edge 79+

**解决方案：**
- 更新浏览器到支持的版本
- 如果使用的是系统内置浏览器，尝试使用Chrome浏览器

## 详细的权限设置步骤

### Android Chrome浏览器：

1. 打开Chrome浏览器
2. 访问网站
3. 点击地址栏左侧的🔒图标
4. 选择"权限"
5. 将"麦克风"设置为"允许"
6. 刷新页面

### iPhone Safari浏览器：

1. 打开Safari浏览器
2. 访问网站
3. 点击地址栏左侧的"aA"图标
4. 选择"网站设置"
5. 将"麦克风"设置为"允许"
6. 刷新页面

## 手机优化设置

系统已针对手机录音进行了优化：

- **自动检测最佳音频格式**：系统会自动选择设备支持的最佳音频格式
- **降噪处理**：启用回声消除和噪音抑制
- **权限预检查**：在录音前检查权限状态
- **友好的错误提示**：提供详细的错误信息和解决建议

## 测试录音功能

如果问题依然存在，您可以：

1. 尝试访问 [WebRTC测试页面](https://webrtc.github.io/samples/src/content/getusermedia/gum/) 测试麦克风
2. 检查浏览器控制台是否有错误信息
3. 联系技术支持并提供错误信息

## 技术说明

录音功能使用Web标准API：
- `getUserMedia()` - 获取麦克风权限
- `MediaRecorder` - 录制音频
- 支持多种音频格式：WebM、MP4、OGG、WAV

这些API需要在安全上下文（HTTPS）中运行，且需要用户明确授权。 