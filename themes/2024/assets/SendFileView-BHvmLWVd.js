import{c as O,d as ke,r as w,o as _e,w as We,a as x,b as t,e as b,_ as Ce,f as te,u as Ge,g as Ke,h as y,n as l,i as r,j as Qe,t as D,k as N,l as q,m as j,p as Q,v as re,T as oe,F as ae,q as Je,s as fe,x as se,y as Xe,X as he,z as Ye,A as Ze,B as H}from"./index-Ce00sBvX.js";import{u as et,S as me,C as tt,c as rt,a as ot,Q as at,b as ye,E as st}from"./clipboard-DxeZlxda.js";import{F as xe}from"./file-C1wxQQYu.js";import{T as nt}from"./trash-DESO2ebE.js";/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=O("ClipboardCopyIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=O("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=O("CloudUploadIcon",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=O("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=O("TerminalIcon",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),ct=ke({__name:"BorderProgressBar",props:{progress:{}},setup(P){const I=P,V=w(null),n=w(null);let p=null;const c=()=>{if(!p||!n.value||!V.value)return;const g=V.value.clientWidth,m=V.value.clientHeight;n.value.width=g,n.value.height=m;const d=4,i=8;p.lineWidth=d;const k=p.createLinearGradient(0,0,g,m);k.addColorStop(0,"#4f46e5"),k.addColorStop(.5,"#7c3aed"),k.addColorStop(1,"#db2777"),p.strokeStyle="rgba(229, 231, 235, 0.2)",T(p,d/2,d/2,g-d,m-d,i),p.stroke();const S=((g+m)*2-8*i+2*Math.PI*i)*I.progress/100;p.strokeStyle=k,p.lineCap="round",p.lineJoin="round",p.beginPath();let u=S;const h=d/2,C=g-d,A=m-d;if(u>0){const v=Math.min(C-2*i,u);p.moveTo(i+h,h),p.lineTo(v+i+h,h),u-=v}if(u>0){const v=Math.min(Math.PI/2,u/i);p.arc(C-i+h,i+h,i,-Math.PI/2,v-Math.PI/2,!1),u-=v*i}if(u>0){const v=Math.min(A-2*i,u);p.lineTo(C+h,v+i+h),u-=v}if(u>0){const v=Math.min(Math.PI/2,u/i);p.arc(C-i+h,A-i+h,i,0,v,!1),u-=v*i}if(u>0){const v=Math.min(C-2*i,u);p.lineTo(C-v-i+h,A+h),u-=v}if(u>0){const v=Math.min(Math.PI/2,u/i);p.arc(i+h,A-i+h,i,Math.PI/2,Math.PI/2+v,!1),u-=v*i}if(u>0){const v=Math.min(A-2*i,u);p.lineTo(h,A-v-i+h),u-=v}if(u>0){const v=Math.min(Math.PI/2,u/i);p.arc(i+h,i+h,i,Math.PI,Math.PI+v,!1)}p.stroke()};function T(g,m,d,i,k,_){g.beginPath(),g.moveTo(m+_,d),g.lineTo(m+i-_,d),g.arcTo(m+i,d,m+i,d+_,_),g.lineTo(m+i,d+k-_),g.arcTo(m+i,d+k,m+i-_,d+k,_),g.lineTo(m+_,d+k),g.arcTo(m,d+k,m,d+k-_,_),g.lineTo(m,d+_),g.arcTo(m,d,m+_,d,_),g.closePath()}return _e(()=>{n.value&&(p=n.value.getContext("2d"),c())}),We(()=>I.progress,c),(g,m)=>(b(),x("div",{class:"border-progress-container",ref_key:"container",ref:V},[t("canvas",{ref_key:"canvas",ref:n,class:"border-progress-canvas"},null,512)],512))}}),gt=Ce(ct,[["__scopeId","data-v-2fbf5085"]]),we=P=>P>=1024*1024*1024?Math.round(P/(1024*1024*1024))+"GB":P>=1024*1024?Math.round(P/(1024*1024))+"MB":Math.round(P/1024)+"KB",pt={class:"p-8"},vt={class:"flex justify-center space-x-2 mb-6"},ft={key:"file",class:"grid grid-cols-1 gap-8"},ht={key:0,class:"absolute inset-0 w-full h-full"},mt={class:"block truncate"},yt={key:"text",class:"grid grid-cols-1 gap-8"},xt={class:"flex flex-col"},bt={key:"audio",class:"grid grid-cols-1 gap-8"},wt={class:"text-center"},kt={key:0,class:"mb-4 p-4 bg-yellow-100 border border-yellow-300 rounded-lg"},_t=["disabled"],Ct={class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},St={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},Mt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10h6v4H9z"},zt={class:"text-2xl font-mono font-bold text-gray-900 mb-4"},Tt=["src"],$t={class:"mt-6"},Dt={key:2,class:"flex gap-3 mt-6"},It={class:"flex flex-col space-y-3"},At={class:"relative flex-grow group"},Rt=["placeholder"],Ft=["value"],Ut=["disabled"],jt={class:"relative z-10 flex items-center justify-center text-lg"},Pt={class:"mt-6 text-center"},Bt={class:"flex-1 overflow-y-auto p-6"},Vt={class:"flex items-start justify-between"},Lt={class:"flex-1 min-w-0"},Ht={class:"flex space-x-2 ml-3"},Et=["onClick"],Nt=["onClick"],qt={key:0,class:"text-center py-12"},Ot={class:"min-w-0 flex-1"},Wt={class:"p-4 sm:p-6"},Gt={class:"flex items-center mb-3 sm:mb-4"},Kt={class:"ml-3 sm:ml-4 min-w-0 flex-1"},Qt={class:"grid grid-cols-2 gap-3 sm:gap-4"},Jt={class:"flex items-center min-w-0"},Xt={class:"flex items-center min-w-0"},Yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},Zt={class:"space-y-3 sm:space-y-4"},er={class:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-4 sm:p-5 text-white"},tr={class:"flex items-center justify-between mb-3 sm:mb-4"},rr={class:"text-2xl sm:text-3xl font-bold tracking-wider text-center break-all"},or={class:"flex items-center justify-between mb-2 sm:mb-3"},ar={class:"bg-white p-3 sm:p-4 rounded-lg shadow-sm mb-3 sm:mb-4"},sr=ke({__name:"SendFileView",setup(P){const I=JSON.parse(localStorage.getItem("config")||"{}"),V=Ze(),n=Qe("isDarkMode"),p=et(),c=w("file"),T=w(null),g=w(""),m=w(null),d=w("day"),i=w("1"),k=w(0),_=w(!1),S=w(null),u=w(!1),h=w(0),C=w(null),A=w(""),v=w("我的录音"),L=w(null),J=w(0),U=w(null),W=w([]),X=te(()=>{if(typeof window>"u")return!1;const o=!!(navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function"),e=typeof window.MediaRecorder<"u",a=window.isSecureContext||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.protocol==="https:";return o&&e&&a}),Se=te(()=>c.value==="file"?T.value!==null:c.value==="text"?g.value.trim()!=="":c.value==="audio"?C.value!==null:!1),M=Ge(),ne=te(()=>p.shareData),E=w(""),Me=async()=>{if(!X.value){M.showAlert("您的浏览器不支持音频录制功能","error");return}u.value?le():await ze()},ze=async()=>{try{const o=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});L.value=new MediaRecorder(o,{mimeType:"audio/webm;codecs=opus"}),W.value=[],L.value.ondataavailable=e=>{e.data.size>0&&W.value.push(e.data)},L.value.onstop=()=>{C.value=new Blob(W.value,{type:"audio/webm"}),A.value=URL.createObjectURL(C.value),o.getTracks().forEach(e=>e.stop())},L.value.start(1e3),u.value=!0,J.value=Date.now(),U.value=setInterval(()=>{h.value=Math.floor((Date.now()-J.value)/1e3)},1e3)}catch(o){console.error("录音启动失败:",o);let e="录音启动失败";o.name==="NotAllowedError"||o.name==="PermissionDeniedError"?e="麦克风权限被拒绝，请允许麦克风访问权限":(o.name==="NotFoundError"||o.name==="DevicesNotFoundError")&&(e="未找到麦克风设备"),M.showAlert(e,"error")}},le=()=>{L.value&&u.value&&(L.value.stop(),u.value=!1,U.value&&(clearInterval(U.value),U.value=null))},ie=()=>{u.value&&le(),C.value=null,A.value="",W.value=[],h.value=0,J.value=0,U.value&&(clearInterval(U.value),U.value=null)},de=o=>{const e=Math.floor(o/60),a=o%60;return`${e.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`};Ke(()=>{U.value&&clearInterval(U.value),A.value&&URL.revokeObjectURL(A.value)});const Te=()=>{var o;(o=m.value)==null||o.click()},$e=async o=>{const e=o.target;if(e.files&&e.files.length>0){const a=e.files[0];if(T.value=a,!Z())return;E.value=await Y(a),console.log(E.value)}},De=async o=>{var e;if((e=o.dataTransfer)!=null&&e.files&&o.dataTransfer.files.length>0){const a=o.dataTransfer.files[0];if(T.value=a,!Z())return;E.value=await Y(a)}},Ie=async o=>{var a;const e=(a=o.clipboardData)==null?void 0:a.items;if(e)for(const s of Array.from(e))if(s.kind==="file"){const f=s.getAsFile();if(f){if(f.size===0){M.showAlert("无法读取空文件","error");return}if(T.value=f,!Z())return;try{E.value=await Y(f),M.showAlert("已从剪贴板添加文件："+f.name,"success")}catch(z){M.showAlert("文件处理失败","error"),console.error("File hash calculation failed:",z)}break}}else c.value="text",e[0].getAsString(f=>{g.value+=f})},Y=async o=>new Promise(e=>{const s=new FileReader;let f=0;const z=Math.ceil(o.size/2097152);s.onload=async R=>{const $=new Uint8Array(R.target.result);try{if(window.isSecureContext){const B=await crypto.subtle.digest("SHA-256",$),ee=Array.from(new Uint8Array(B)).map(K=>K.toString(16).padStart(2,"0")).join("");f++,f<z?F():e(ee)}else{const B=ue(o);e(B)}}catch{const G=ue(o);e(G)}};const F=()=>{const R=f*2097152,$=R+2097152>=o.size?o.size:R+2097152;s.readAsArrayBuffer(o.slice(R,$))};F()}),ue=o=>{const e=`${o.name}-${o.size}-${o.lastModified}`;let a=0;for(let s=0;s<e.length;s++){const f=e.charCodeAt(s);a=(a<<5)-a+f,a=a&a}return Math.abs(a).toString(16).padStart(64,"0")},Ae=(o=d.value)=>{switch(o){case"day":return"输入天数";case"hour":return"输入小时数";case"minute":return"输入分钟数";case"count":return"输入查看次数";case"forever":return"永久";default:return"输入值"}},ce=(o=d.value)=>{switch(o){case"day":return"天";case"hour":return"小时";case"minute":return"分钟";case"count":return"次";case"forever":return"永久";default:return""}},Re=async o=>{var e,a;try{const f=Math.ceil(o.size/5242880),z=await H.post("chunk/upload/init/",{file_name:o.name,file_size:o.size,chunk_size:5242880,file_hash:E.value});if(z.code!==200)throw new Error("初始化切片上传失败");if(z.detail.existed)return z;const F=z.detail.upload_id;for(let $=0;$<f;$++){const B=$*5242880,G=Math.min(B+5242880,o.size),ee=o.slice(B,G),K=new FormData;if(K.append("chunk",new Blob([ee],{type:o.type})),(await H.post(`chunk/upload/chunk/${F}/${$}`,K,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:qe=>{const Oe=Math.round(($*5242880+qe.loaded)*100/o.size);k.value=Oe}})).code!==200)throw new Error(`切片 ${$} 上传失败`)}const R=await H.post(`chunk/upload/complete/${F}`,{expire_value:i.value?parseInt(i.value):1,expire_style:d.value});if(R.code!==200)throw new Error("完成上传失败");return R}catch(s){throw console.error("切片上传失败:",s),(a=(e=s.response)==null?void 0:e.data)!=null&&a.detail?M.showAlert(s.response.data.detail,"error"):M.showAlert("上传失败,请稍后重试","error"),s}},Fe=async o=>{const e=new FormData,a={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{const z=Math.round(f.loaded*100/f.total);k.value=z}};return e.append("file",o),e.append("expire_value",i.value),e.append("expire_style",d.value),await H.post("share/file/",e,a)},Ue=async()=>{if(!C.value)throw new Error("音频文件为空");const o=v.value.trim()||"我的录音",e=h.value;try{const a=new FormData;return a.append("audio_file",C.value,`${o}.webm`),a.append("name",o),a.append("duration",e.toString()),a.append("format","webm"),a.append("expire_value",i.value),a.append("expire_style",d.value),await H.post("share/audio/",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{const z=Math.round(f.loaded*100/f.total);k.value=z}})}catch(a){throw console.error("音频上传失败:",a),a}},je=()=>I.openUpload===0&&localStorage.getItem("token")===null?(M.showAlert("游客上传功能已关闭","error"),!1):!0,Pe=o=>o.size>I.uploadSize?(M.showAlert(`文件大小超过限制 (${we(I.uploadSize)})`,"error"),T.value=null,!1):!0,ge=(o,e)=>{if(o==="forever"||o==="count")return!0;const a=I.max_save_seconds||0;if(a===0)return!0;let s=0;switch(o){case"minute":s=parseInt(e)*60;break;case"hour":s=parseInt(e)*3600;break;case"day":s=parseInt(e)*86400;break;default:return!1}return s<=a},Z=()=>!(!je()||c.value==="file"&&T.value&&!Pe(T.value)||!ge(d.value,i.value)),Be=async()=>{var o,e;if(c.value==="file"&&!T.value){M.showAlert("请选择要上传的文件","error");return}if(c.value==="text"&&!g.value.trim()){M.showAlert("请输入要发送的文本","error");return}if(c.value==="audio"&&!C.value){M.showAlert("请先录制音频","error");return}if(d.value!=="forever"&&!i.value){M.showAlert("请输入过期值","error");return}if(!ge(d.value,i.value)){const a=Math.floor(I.max_save_seconds/86400);M.showAlert(`过期时间不能超过${a}天`,"error");return}try{let a;if(c.value==="file")I.enableChunk?a=await Re(T.value):a=await Fe(T.value);else if(c.value==="text"){const s=new FormData;s.append("text",g.value),s.append("expire_value",i.value),s.append("expire_style",d.value),a=await H.post("share/text/",s,{headers:{"Content-Type":"multipart/form-data"}})}else c.value==="audio"&&(a=await Ue());if(a&&a.code===200){const s=a.detail.code,f=a.detail.name;let z="",F="";c.value==="text"?(z=`${(g.value.length/1024).toFixed(2)} KB`,F="📝"):c.value==="audio"?(z=`${((C.value?C.value.size:0)/1024).toFixed(2)} KB`,F="🎵"):(z=`${(T.value.size/(1024*1024)).toFixed(1)} MB`,F="📁");const R={id:Date.now(),filename:`${F} ${f}`,date:new Date().toISOString().split("T")[0],size:z,expiration:d.value==="forever"?"永久":`${i.value}${ce()}后过期`,retrieveCode:s};p.addShareData(R);let $="";c.value==="audio"?$=`音频发送成功！时长: ${de(h.value)}，取件码：${s}`:$=`${c.value==="file"?"文件":"文本"}发送成功！取件码：${s}`,M.showAlert($,"success"),T.value=null,g.value="",ie(),k.value=0,S.value=R,await ye(s)}else throw new Error("服务器响应异常")}catch(a){console.error("发送失败:",a),(e=(o=a.response)==null?void 0:o.data)!=null&&e.detail?M.showAlert(a.response.data.detail,"error"):M.showAlert("发送失败,请稍后重试","error")}finally{k.value=0}},Ve=()=>{V.push("/")},pe=()=>{_.value=!_.value},Le=o=>{S.value=o},He=o=>{const e=p.shareData.findIndex(a=>a.id===o);e!==-1&&p.deleteShareData(e)},Ee=window.location.origin+"/#/",Ne=o=>`${Ee}?code=${o.retrieveCode}`,ve=o=>{const a=(parseInt(i.value)||0)+o;a>=1&&(i.value=a.toString())};return _e(()=>{console.log("SendFileView mounted")}),(o,e)=>{const a=Xe("router-link");return b(),x("div",{class:"min-h-screen flex items-center justify-center p-4 overflow-hidden transition-colors duration-300",onPaste:N(Ie,["prevent"])},[t("div",{class:l(["rounded-3xl shadow-2xl overflow-hidden border w-full max-w-md transition-colors duration-300",[r(n)?"bg-white bg-opacity-10 backdrop-filter backdrop-blur-xl border-gray-700":"bg-white border-gray-200"]])},[t("div",pt,[t("h2",{class:l(["text-3xl font-extrabold text-center mb-8 cursor-pointer transition-colors duration-300",[r(n)?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 via-purple-300 to-pink-300":"text-indigo-600"]]),onClick:Ve},D(r(I).name),3),t("form",{onSubmit:N(Be,["prevent"]),class:"space-y-8"},[t("div",vt,[t("button",{type:"button",onClick:e[0]||(e[0]=s=>c.value="file"),class:l(["px-3 py-2 rounded-lg text-sm",c.value==="file"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"])}," 发送文件 ",2),t("button",{type:"button",onClick:e[1]||(e[1]=s=>c.value="text"),class:l(["px-3 py-2 rounded-lg text-sm",c.value==="text"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"])}," 发送文本 ",2),t("button",{type:"button",onClick:e[2]||(e[2]=s=>c.value="audio"),class:l(["px-3 py-2 rounded-lg text-sm",c.value==="audio"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"])}," 音频录制 ",2)]),y(oe,{name:"fade",mode:"out-in"},{default:q(()=>[c.value==="file"?(b(),x("div",ft,[t("div",{class:l(["rounded-xl p-8 flex flex-col items-center justify-center border-2 border-dashed transition-all duration-300 group cursor-pointer relative",[r(n)?"bg-gray-800 bg-opacity-50 border-gray-600 hover:border-indigo-500":"bg-gray-100 border-gray-300 hover:border-indigo-500"]]),onClick:Te,onDragover:e[3]||(e[3]=N(()=>{},["prevent"])),onDrop:N(De,["prevent"])},[t("input",{id:"file-upload",type:"file",class:"hidden",onChange:$e,ref_key:"fileInput",ref:m},null,544),k.value>0?(b(),x("div",ht,[y(gt,{progress:k.value},null,8,["progress"])])):j("",!0),y(r(it),{class:l(["w-16 h-16 transition-colors duration-300",r(n)?"text-gray-400 group-hover:text-indigo-400":"text-gray-600 group-hover:text-indigo-600"])},null,8,["class"]),t("p",{class:l(["mt-4 text-sm transition-colors duration-300 w-full text-center",r(n)?"text-gray-400 group-hover:text-indigo-400":"text-gray-600 group-hover:text-indigo-600"])},[t("span",mt,D(T.value?T.value.name:"点击或拖放文件到此处上传"),1)],2),t("p",{class:l(["mt-2 text-xs",r(n)?"text-gray-500":"text-gray-400"])}," 支持各种常见格式，最大"+D(r(we)(r(I).uploadSize)),3)],34)])):c.value==="text"?(b(),x("div",yt,[t("div",xt,[Q(t("textarea",{id:"text-content","onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s),rows:"7",class:l(["flex-grow px-4 py-3 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-300 resize-none",r(n)?"bg-gray-800 bg-opacity-50 text-white":"bg-white text-gray-900 border border-gray-300"]),placeholder:"在此输入要发送的文本..."},null,2),[[re,g.value]])])])):c.value==="audio"?(b(),x("div",bt,[t("div",wt,[X.value?j("",!0):(b(),x("div",kt,e[15]||(e[15]=[t("p",{class:"text-yellow-800 text-sm"}," ⚠️ 音频录制功能需要在HTTPS环境下运行，或在支持的浏览器中使用。 ",-1)]))),t("button",{type:"button",onClick:Me,disabled:!X.value,class:l(["w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg hover:shadow-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",[u.value?"bg-gradient-to-br from-green-500 to-green-600 animate-pulse":"bg-gradient-to-br from-red-500 to-red-600"]])},[(b(),x("svg",Ct,[u.value?(b(),x("path",Mt)):(b(),x("path",St))]))],10,_t),t("div",zt,D(de(h.value)),1),C.value?(b(),x("audio",{key:1,src:A.value,controls:"",class:"w-full rounded-lg mb-4"},null,8,Tt)):j("",!0),t("div",$t,[t("label",{class:l(["block text-sm font-medium mb-2",r(n)?"text-gray-300":"text-gray-700"])}," 录音文件名 ",2),Q(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>v.value=s),type:"text",placeholder:"我的录音",class:l(["w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-300",r(n)?"bg-gray-800 bg-opacity-50 text-white border border-gray-600":"bg-white text-gray-900 border border-gray-300"])},null,2),[[re,v.value]])]),C.value?(b(),x("div",Dt,[t("button",{type:"button",onClick:ie,class:l(["flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",[r(n)?"bg-gray-700 text-gray-300 hover:bg-gray-600":""]])}," 重新录制 ",2)])):j("",!0)])])):j("",!0)]),_:1}),t("div",It,[t("label",{class:l(["text-sm font-medium",r(n)?"text-gray-300":"text-gray-700"])}," 过期时间 ",2),t("div",At,[t("div",{class:l(["relative h-11 rounded-xl border transition-all duration-300",r(n)?"bg-gray-800/50 border-gray-700/50 group-hover:border-gray-600":"bg-white border-gray-200 group-hover:border-gray-300"])},[d.value!=="forever"?(b(),x(ae,{key:0},[Q(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>i.value=s),type:"number",placeholder:Ae(),min:"1",class:l(["w-full h-full px-4 pr-32 rounded-xl placeholder-gray-400 transition-all duration-300","focus:outline-none focus:ring-2 focus:ring-offset-0","[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none","bg-transparent",r(n)?"text-gray-100 focus:ring-indigo-500/70 placeholder-gray-500":"text-gray-900 focus:ring-indigo-500/50 placeholder-gray-400"])},null,10,Rt),[[re,i.value]]),t("div",{class:l(["absolute right-24 top-0 h-full flex flex-col border-l",[r(n)?"border-gray-700/50":"border-gray-200"]])},[t("button",{type:"button",onClick:e[7]||(e[7]=s=>ve(1)),class:l(["flex-1 px-2 flex items-center justify-center transition-all duration-200",[r(n)?"hover:bg-gray-700/50 text-gray-400 hover:text-gray-200":"hover:bg-gray-50 text-gray-500 hover:text-gray-700"]])},e[16]||(e[16]=[t("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})],-1)]),2),t("button",{type:"button",onClick:e[8]||(e[8]=s=>ve(-1)),class:l(["flex-1 px-2 flex items-center justify-center transition-all duration-200",[r(n)?"hover:bg-gray-700/50 text-gray-400 hover:text-gray-200":"hover:bg-gray-50 text-gray-500 hover:text-gray-700"]])},e[17]||(e[17]=[t("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),2)],2)],64)):j("",!0),Q(t("select",{"onUpdate:modelValue":e[9]||(e[9]=s=>d.value=s),class:l(["absolute right-0 top-0 h-full appearance-none cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-0",d.value==="forever"?"w-full px-4":"w-24 pl-3 pr-8 border-l",r(n)?"text-gray-100 border-gray-700/50 focus:ring-indigo-500/70 bg-gray-800/50":"text-gray-900 border-gray-200 focus:ring-indigo-500/50 bg-white"])},[(b(!0),x(ae,null,fe(r(I).expireStyle,s=>(b(),x("option",{value:s,key:s,class:l([r(n)?"bg-gray-800 text-gray-100":"bg-white text-gray-900"])},D(ce(s)),11,Ft))),128))],2),[[Je,d.value]]),t("div",{class:l(["absolute pointer-events-none",[d.value==="forever"?"right-3":"right-2","top-1/2 -translate-y-1/2"]])},[(b(),x("svg",{class:l(["w-4 h-4 transition-colors duration-300",[r(n)?"text-gray-400":"text-gray-500"]]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2)],2)])]),t("button",{type:"submit",disabled:!Se.value,class:"w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-bold py-4 px-6 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition-all duration-300 transform hover:scale-105 hover:shadow-lg relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[e[20]||(e[20]=t("span",{class:"absolute top-0 left-0 w-full h-full bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"},null,-1)),t("span",jt,[y(r(dt),{class:"w-6 h-6 mr-2"}),e[19]||(e[19]=t("span",null,"安全寄送",-1))])],8,Ut)],32),t("div",Pt,[y(a,{to:"/",class:"text-indigo-400 hover:text-indigo-300 transition duration-300"},{default:q(()=>e[21]||(e[21]=[se(" 需要取件？点击这里 ",-1)])),_:1,__:[21]})])]),t("div",{class:l(["px-8 py-4 bg-opacity-50 flex justify-between items-center",[r(n)?"bg-gray-800":"bg-gray-100"]])},[t("span",{class:l(["text-sm flex items-center",[r(n)?"text-gray-300":"text-gray-800"]])},[y(r(me),{class:"w-4 h-4 mr-1 text-green-400"}),e[22]||(e[22]=se(" 安全加密 ",-1))],2),t("button",{onClick:pe,class:l(["text-sm hover:text-indigo-300 transition duration-300 flex items-center",[r(n)?"text-indigo-400":"text-indigo-600"]])},[e[23]||(e[23]=se(" 发件记录 ",-1)),y(r(tt),{class:"w-4 h-4 ml-1"})],2)],2)],2),y(oe,{name:"drawer"},{default:q(()=>[_.value?(b(),x("div",{key:0,class:l(["fixed inset-y-0 right-0 w-full sm:w-120 bg-opacity-70 backdrop-filter backdrop-blur-xl shadow-2xl z-50 overflow-hidden flex flex-col",[r(n)?"bg-gray-900":"bg-white"]])},[t("div",{class:l(["flex justify-between items-center p-6 border-b",[r(n)?"border-gray-700":"border-gray-200"]])},[t("h3",{class:l(["text-xl font-semibold",[r(n)?"text-white":"text-gray-900"]])}," 发件记录 ",2),t("button",{onClick:pe,class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[y(r(he),{class:l(["w-6 h-6",[r(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])])],2),t("div",Bt,[y(Ye,{name:"list",tag:"div",class:"space-y-4"},{default:q(()=>[(b(!0),x(ae,null,fe(ne.value,s=>(b(),x("div",{key:s.id,class:l(["rounded-xl p-4 border transition-all duration-300 hover:shadow-md",[r(n)?"bg-gray-800 bg-opacity-50 border-gray-700 hover:border-gray-600":"bg-gray-50 border-gray-200 hover:border-gray-300"]])},[t("div",Vt,[t("div",Lt,[t("h4",{class:l(["font-medium text-sm truncate",[r(n)?"text-white":"text-gray-900"]])},D(s.filename),3),t("p",{class:l(["text-xs mt-1 truncate",[r(n)?"text-gray-400":"text-gray-500"]])},D(s.size)+" · "+D(s.date),3),t("p",{class:l(["text-xs mt-1 truncate",[r(n)?"text-gray-400":"text-gray-500"]])},D(s.expiration),3)]),t("div",Ht,[t("button",{onClick:f=>Le(s),class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[y(r(st),{class:l(["w-4 h-4",[r(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])],8,Et),t("button",{onClick:f=>He(s.id),class:"p-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},[y(r(nt),{class:"w-4 h-4 text-red-500"})],8,Nt)])])],2))),128))]),_:1}),ne.value.length===0?(b(),x("div",qt,[y(r(xe),{class:l(["w-16 h-16 mx-auto mb-4",[r(n)?"text-gray-600":"text-gray-300"]])},null,8,["class"]),t("p",{class:l([r(n)?"text-gray-400":"text-gray-500"])}," 暂无发件记录 ",2)])):j("",!0)])],2)):j("",!0)]),_:1}),y(oe,{name:"fade"},{default:q(()=>[S.value?(b(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:e[14]||(e[14]=N(s=>S.value=null,["self"]))},[t("div",{class:l(["w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden transform transition-all duration-300",[r(n)?"bg-gray-900":"bg-white"]])},[t("div",{class:l(["px-4 sm:px-6 py-3 sm:py-4 border-b flex justify-between items-center",[r(n)?"border-gray-800 bg-gray-800":"border-gray-100 bg-gray-50"]])},[t("div",Ot,[t("h3",{class:l(["text-base sm:text-lg font-semibold truncate",[r(n)?"text-white":"text-gray-900"]])}," 文件详情 ",2),t("button",{onClick:e[10]||(e[10]=s=>S.value=null),class:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[y(r(he),{class:l(["w-4 h-4 sm:w-5 sm:h-5",[r(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])])])],2),t("div",Wt,[t("div",{class:l(["rounded-xl p-3 sm:p-4 mb-4 sm:mb-6",[r(n)?"bg-gray-800 bg-opacity-50":"bg-gray-50 bg-opacity-95"]])},[t("div",Gt,[t("div",{class:l(["p-2 sm:p-3 rounded-lg",[r(n)?"bg-gray-800":"bg-white"]])},[y(r(xe),{class:l(["w-5 h-5 sm:w-6 sm:h-6",[r(n)?"text-indigo-400":"text-indigo-600"]])},null,8,["class"])],2),t("div",Kt,[t("h4",{class:l(["font-medium text-sm sm:text-base truncate",[r(n)?"text-white":"text-gray-900"]])},D(S.value.filename),3),t("p",{class:l(["text-xs sm:text-sm truncate",[r(n)?"text-gray-400":"text-gray-500"]])},D(S.value.size)+" · "+D(S.value.date),3)])]),t("div",Qt,[t("div",Jt,[y(r(lt),{class:l(["w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0",[r(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"]),t("span",{class:l(["text-xs sm:text-sm truncate",[r(n)?"text-gray-300":"text-gray-600"]])},D(S.value.expiration),3)]),t("div",Xt,[y(r(me),{class:l(["w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0",[r(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"]),t("span",{class:l(["text-xs sm:text-sm truncate",[r(n)?"text-gray-300":"text-gray-600"]])}," 安全加密 ",2)])])],2),t("div",Yt,[t("div",Zt,[t("div",er,[t("div",tr,[e[24]||(e[24]=t("h4",{class:"font-medium text-sm sm:text-base"},"取件码",-1)),t("button",{onClick:e[11]||(e[11]=s=>r(rt)(S.value.retrieveCode)),class:"p-1.5 sm:p-2 rounded-full hover:bg-white/10 transition-colors"},[y(r(be),{class:"w-4 h-4 sm:w-5 sm:h-5"})])]),t("p",rr,D(S.value.retrieveCode),1)]),t("div",{class:l(["rounded-xl p-3 sm:p-4",[r(n)?"bg-gray-800 bg-opacity-50":"bg-gray-50 bg-opacity-95"]])},[t("div",or,[t("h4",{class:l(["font-medium text-sm sm:text-base flex items-center min-w-0",[r(n)?"text-white":"text-gray-900"]])},[y(r(ut),{class:"w-4 h-4 sm:w-5 sm:h-5 mr-1.5 sm:mr-2 text-indigo-500 flex-shrink-0"}),e[25]||(e[25]=t("span",{class:"truncate"},"wget下载",-1))],2),t("button",{onClick:e[12]||(e[12]=s=>r(ot)(S.value.retrieveCode,S.value.filename)),class:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex-shrink-0"},[y(r(be),{class:l(["w-4 h-4 sm:w-5 sm:h-5",[r(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])])]),t("p",{class:l(["text-xs sm:text-sm font-mono break-all line-clamp-2",[r(n)?"text-gray-300":"text-gray-600"]])}," 点击复制wget命令 ",2)],2)]),t("div",{class:l(["rounded-xl p-4 sm:p-5 flex flex-col items-center",[r(n)?"bg-gray-800 bg-opacity-50":"bg-gray-50 bg-opacity-95"]])},[t("div",ar,[y(at,{value:Ne(S.value),size:140,level:"M",class:"sm:w-[160px] sm:h-[160px]"},null,8,["value"])]),t("p",{class:l(["text-xs sm:text-sm truncate max-w-full",[r(n)?"text-gray-400":"text-gray-500"]])}," 扫描二维码快速取件 ",2)],2)])]),t("div",{class:l(["px-4 sm:px-6 py-3 sm:py-4 border-t",[r(n)?"border-gray-800":"border-gray-100"]])},[t("button",{onClick:e[13]||(e[13]=s=>r(ye)(S.value.retrieveCode)),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg text-sm sm:text-base font-medium transition-colors"}," 复制取件链接 ")],2)],2)])):j("",!0)]),_:1})],32)}}}),cr=Ce(sr,[["__scopeId","data-v-257cb2d5"]]);export{cr as default};
