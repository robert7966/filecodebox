import{c as O,d as ke,r as w,o as _e,w as Ge,a as x,b as t,e as b,_ as Se,f as te,u as Ke,g as Qe,h as y,n as l,i as o,j as Je,t as A,k as N,l as q,m as P,p as J,v as re,T as oe,F as ae,q as Xe,s as fe,x as se,y as Ye,X as me,z as Ze,A as et,B as H}from"./index-CGDxncfe.js";import{u as tt,S as he,C as rt,c as ot,a as at,Q as st,b as ye,E as nt}from"./clipboard-HSN30T0J.js";import{F as xe}from"./file-Cn24WJ1S.js";import{T as lt}from"./trash-Cn8_1YsC.js";/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=O("ClipboardCopyIcon",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=O("ClockIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=O("CloudUploadIcon",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=O("SendIcon",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-vue-next v0.445.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=O("TerminalIcon",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),gt=ke({__name:"BorderProgressBar",props:{progress:{}},setup(j){const D=j,V=w(null),n=w(null);let v=null;const g=()=>{if(!v||!n.value||!V.value)return;const p=V.value.clientWidth,h=V.value.clientHeight;n.value.width=p,n.value.height=h;const d=4,i=8;v.lineWidth=d;const k=v.createLinearGradient(0,0,p,h);k.addColorStop(0,"#4f46e5"),k.addColorStop(.5,"#7c3aed"),k.addColorStop(1,"#db2777"),v.strokeStyle="rgba(229, 231, 235, 0.2)",z(v,d/2,d/2,p-d,h-d,i),v.stroke();const M=((p+h)*2-8*i+2*Math.PI*i)*D.progress/100;v.strokeStyle=k,v.lineCap="round",v.lineJoin="round",v.beginPath();let u=M;const m=d/2,C=p-d,I=h-d;if(u>0){const f=Math.min(C-2*i,u);v.moveTo(i+m,m),v.lineTo(f+i+m,m),u-=f}if(u>0){const f=Math.min(Math.PI/2,u/i);v.arc(C-i+m,i+m,i,-Math.PI/2,f-Math.PI/2,!1),u-=f*i}if(u>0){const f=Math.min(I-2*i,u);v.lineTo(C+m,f+i+m),u-=f}if(u>0){const f=Math.min(Math.PI/2,u/i);v.arc(C-i+m,I-i+m,i,0,f,!1),u-=f*i}if(u>0){const f=Math.min(C-2*i,u);v.lineTo(C-f-i+m,I+m),u-=f}if(u>0){const f=Math.min(Math.PI/2,u/i);v.arc(i+m,I-i+m,i,Math.PI/2,Math.PI/2+f,!1),u-=f*i}if(u>0){const f=Math.min(I-2*i,u);v.lineTo(m,I-f-i+m),u-=f}if(u>0){const f=Math.min(Math.PI/2,u/i);v.arc(i+m,i+m,i,Math.PI,Math.PI+f,!1)}v.stroke()};function z(p,h,d,i,k,S){p.beginPath(),p.moveTo(h+S,d),p.lineTo(h+i-S,d),p.arcTo(h+i,d,h+i,d+S,S),p.lineTo(h+i,d+k-S),p.arcTo(h+i,d+k,h+i-S,d+k,S),p.lineTo(h+S,d+k),p.arcTo(h,d+k,h,d+k-S,S),p.lineTo(h,d+S),p.arcTo(h,d,h+S,d,S),p.closePath()}return _e(()=>{n.value&&(v=n.value.getContext("2d"),g())}),Ge(()=>D.progress,g),(p,h)=>(b(),x("div",{class:"border-progress-container",ref_key:"container",ref:V},[t("canvas",{ref_key:"canvas",ref:n,class:"border-progress-canvas"},null,512)],512))}}),pt=Se(gt,[["__scopeId","data-v-2fbf5085"]]),we=j=>j>=1024*1024*1024?Math.round(j/(1024*1024*1024))+"GB":j>=1024*1024?Math.round(j/(1024*1024))+"MB":Math.round(j/1024)+"KB",vt={class:"p-8"},ft={class:"flex justify-center space-x-2 mb-6"},mt={key:"file",class:"grid grid-cols-1 gap-8"},ht={key:0,class:"absolute inset-0 w-full h-full"},yt={class:"block truncate"},xt={key:"text",class:"grid grid-cols-1 gap-8"},bt={class:"flex flex-col"},wt={key:"audio",class:"grid grid-cols-1 gap-8"},kt={class:"text-center"},_t={key:0,class:"mb-4 p-4 bg-yellow-100 border border-yellow-300 rounded-lg"},St={key:1,class:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg"},Ct=["disabled"],Mt={class:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Tt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"},zt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z M9 10h6v4H9z"},$t={class:"text-2xl font-mono font-bold text-gray-900 mb-4"},At=["src"],Dt={class:"mt-6"},It={key:3,class:"flex gap-3 mt-6"},Rt={class:"flex flex-col space-y-3"},Ft={class:"relative flex-grow group"},Pt=["placeholder"],Ut=["value"],jt=["disabled"],Bt={class:"relative z-10 flex items-center justify-center text-lg"},Et={class:"mt-6 text-center"},Vt={class:"flex-1 overflow-y-auto p-6"},Ht={class:"flex items-start justify-between"},Lt={class:"flex-1 min-w-0"},Nt={class:"flex space-x-2 ml-3"},qt=["onClick"],Ot=["onClick"],Wt={key:0,class:"text-center py-12"},Gt={class:"min-w-0 flex-1"},Kt={class:"p-4 sm:p-6"},Qt={class:"flex items-center mb-3 sm:mb-4"},Jt={class:"ml-3 sm:ml-4 min-w-0 flex-1"},Xt={class:"grid grid-cols-2 gap-3 sm:gap-4"},Yt={class:"flex items-center min-w-0"},Zt={class:"flex items-center min-w-0"},er={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},tr={class:"space-y-3 sm:space-y-4"},rr={class:"bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl p-4 sm:p-5 text-white"},or={class:"flex items-center justify-between mb-3 sm:mb-4"},ar={class:"text-2xl sm:text-3xl font-bold tracking-wider text-center break-all"},sr={class:"flex items-center justify-between mb-2 sm:mb-3"},nr={class:"bg-white p-3 sm:p-4 rounded-lg shadow-sm mb-3 sm:mb-4"},lr=ke({__name:"SendFileView",setup(j){const D=JSON.parse(localStorage.getItem("config")||"{}"),V=et(),n=Je("isDarkMode"),v=tt(),g=w("file"),z=w(null),p=w(""),h=w(null),d=w("day"),i=w("1"),k=w(0),S=w(!1),M=w(null),u=w(!1),m=w(0),C=w(null),I=w(""),f=w("æˆ‘çš„å½•éŸ³"),E=w(null),X=w(0),U=w(null),W=w([]),G=te(()=>{if(typeof window>"u")return!1;const r=!!(navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function"),e=typeof window.MediaRecorder<"u",s=window.isSecureContext||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.protocol==="https:";return r&&e&&s}),Ce=te(()=>g.value==="file"?z.value!==null:g.value==="text"?p.value.trim()!=="":g.value==="audio"?C.value!==null:!1),_=Ke(),ne=te(()=>v.shareData),L=w(""),Me=()=>{const r=["audio/webm;codecs=opus","audio/mp4","audio/webm","audio/ogg;codecs=opus","audio/wav"];for(const e of r)if(MediaRecorder.isTypeSupported(e))return e;return""},Te=async()=>{if(!G.value){_.showAlert("æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å½•åˆ¶åŠŸèƒ½ï¼Œè¯·ä½¿ç”¨HTTPSåè®®æˆ–æ”¯æŒçš„æµè§ˆå™¨","error");return}u.value?le():await ze()},ze=async()=>{try{if(navigator.permissions)try{if((await navigator.permissions.query({name:"microphone"})).state==="denied"){_.showAlert("éº¦å…‹é£æƒé™è¢«æ‹’ç»ï¼Œè¯·åœ¨æµè§ˆå™¨è®¾ç½®ä¸­å…è®¸éº¦å…‹é£è®¿é—®æƒé™","error");return}}catch{console.log("æ— æ³•æŸ¥è¯¢æƒé™çŠ¶æ€ï¼Œç»§ç»­å°è¯•å½•éŸ³")}const r=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:{ideal:44100,min:16e3},channelCount:{ideal:1},sampleSize:{ideal:16}}}),e=Me(),s=e?{mimeType:e}:{};E.value=new MediaRecorder(r,s),W.value=[],E.value.ondataavailable=a=>{a.data.size>0&&W.value.push(a.data)},E.value.onstop=()=>{const a=e||"audio/webm";C.value=new Blob(W.value,{type:a}),I.value=URL.createObjectURL(C.value),r.getTracks().forEach(c=>c.stop())},E.value.onerror=a=>{console.error("MediaRecorderé”™è¯¯:",a),_.showAlert("å½•éŸ³è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯","error"),r.getTracks().forEach(c=>c.stop())},E.value.start(1e3),u.value=!0,X.value=Date.now(),U.value=setInterval(()=>{m.value=Math.floor((Date.now()-X.value)/1e3)},1e3)}catch(r){console.error("å½•éŸ³å¯åŠ¨å¤±è´¥:",r);let e="å½•éŸ³å¯åŠ¨å¤±è´¥";r.name==="NotAllowedError"||r.name==="PermissionDeniedError"?e='éº¦å…‹é£æƒé™è¢«æ‹’ç»ã€‚è¯·åœ¨Chromeæµè§ˆå™¨åœ°å€æ ç‚¹å‡»ğŸ”’æˆ–ğŸ¤å›¾æ ‡ï¼Œé€‰æ‹©"å…è®¸"éº¦å…‹é£è®¿é—®æƒé™ï¼Œç„¶ååˆ·æ–°é¡µé¢é‡è¯•ã€‚':r.name==="NotFoundError"||r.name==="DevicesNotFoundError"?e="æœªæ‰¾åˆ°éº¦å…‹é£è®¾å¤‡ï¼Œè¯·ç¡®ä¿æ‚¨çš„è®¾å¤‡å·²è¿æ¥éº¦å…‹é£å¹¶åœ¨ç³»ç»Ÿè®¾ç½®ä¸­å¯ç”¨":r.name==="NotReadableError"||r.name==="TrackStartError"?e="éº¦å…‹é£è¢«å…¶ä»–åº”ç”¨å ç”¨ï¼Œè¯·å…³é—­å…¶ä»–æ­£åœ¨ä½¿ç”¨éº¦å…‹é£çš„åº”ç”¨ç¨‹åºï¼Œç„¶åé‡è¯•":r.name==="OverconstrainedError"||r.name==="ConstraintNotSatisfiedError"?e="éº¦å…‹é£ä¸æ”¯æŒæ‰€éœ€çš„å½•éŸ³æ ¼å¼ï¼Œè¯·å°è¯•ä½¿ç”¨å…¶ä»–è®¾å¤‡":r.name==="SecurityError"?e="å®‰å…¨é™åˆ¶ï¼šè¯·ç¡®ä¿é¡µé¢åœ¨HTTPSç¯å¢ƒä¸‹è¿è¡Œ":r.name==="AbortError"?e="å½•éŸ³è¯·æ±‚è¢«ä¸­æ–­ï¼Œè¯·é‡è¯•":e=`å½•éŸ³å¯åŠ¨å¤±è´¥: ${r.message||"æœªçŸ¥é”™è¯¯"}`,_.showAlert(e,"error")}},le=()=>{E.value&&u.value&&(E.value.stop(),u.value=!1,U.value&&(clearInterval(U.value),U.value=null))},ie=()=>{u.value&&le(),C.value=null,I.value="",W.value=[],m.value=0,X.value=0,U.value&&(clearInterval(U.value),U.value=null)},de=r=>{const e=Math.floor(r/60),s=r%60;return`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`};Qe(()=>{U.value&&clearInterval(U.value),I.value&&URL.revokeObjectURL(I.value)});const $e=()=>{var r;(r=h.value)==null||r.click()},Ae=async r=>{const e=r.target;if(e.files&&e.files.length>0){const s=e.files[0];if(z.value=s,!Z())return;L.value=await Y(s),console.log(L.value)}},De=async r=>{var e;if((e=r.dataTransfer)!=null&&e.files&&r.dataTransfer.files.length>0){const s=r.dataTransfer.files[0];if(z.value=s,!Z())return;L.value=await Y(s)}},Ie=async r=>{var s;const e=(s=r.clipboardData)==null?void 0:s.items;if(e)for(const a of Array.from(e))if(a.kind==="file"){const c=a.getAsFile();if(c){if(c.size===0){_.showAlert("æ— æ³•è¯»å–ç©ºæ–‡ä»¶","error");return}if(z.value=c,!Z())return;try{L.value=await Y(c),_.showAlert("å·²ä»å‰ªè´´æ¿æ·»åŠ æ–‡ä»¶ï¼š"+c.name,"success")}catch(T){_.showAlert("æ–‡ä»¶å¤„ç†å¤±è´¥","error"),console.error("File hash calculation failed:",T)}break}}else g.value="text",e[0].getAsString(c=>{p.value+=c})},Y=async r=>new Promise(e=>{const a=new FileReader;let c=0;const T=Math.ceil(r.size/2097152);a.onload=async R=>{const $=new Uint8Array(R.target.result);try{if(window.isSecureContext){const B=await crypto.subtle.digest("SHA-256",$),ee=Array.from(new Uint8Array(B)).map(Q=>Q.toString(16).padStart(2,"0")).join("");c++,c<T?F():e(ee)}else{const B=ue(r);e(B)}}catch{const K=ue(r);e(K)}};const F=()=>{const R=c*2097152,$=R+2097152>=r.size?r.size:R+2097152;a.readAsArrayBuffer(r.slice(R,$))};F()}),ue=r=>{const e=`${r.name}-${r.size}-${r.lastModified}`;let s=0;for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);s=(s<<5)-s+c,s=s&s}return Math.abs(s).toString(16).padStart(64,"0")},Re=(r=d.value)=>{switch(r){case"day":return"è¾“å…¥å¤©æ•°";case"hour":return"è¾“å…¥å°æ—¶æ•°";case"minute":return"è¾“å…¥åˆ†é’Ÿæ•°";case"count":return"è¾“å…¥æŸ¥çœ‹æ¬¡æ•°";case"forever":return"æ°¸ä¹…";default:return"è¾“å…¥å€¼"}},ce=(r=d.value)=>{switch(r){case"day":return"å¤©";case"hour":return"å°æ—¶";case"minute":return"åˆ†é’Ÿ";case"count":return"æ¬¡";case"forever":return"æ°¸ä¹…";default:return""}},Fe=async r=>{var e,s;try{const c=Math.ceil(r.size/5242880),T=await H.post("chunk/upload/init/",{file_name:r.name,file_size:r.size,chunk_size:5242880,file_hash:L.value});if(T.code!==200)throw new Error("åˆå§‹åŒ–åˆ‡ç‰‡ä¸Šä¼ å¤±è´¥");if(T.detail.existed)return T;const F=T.detail.upload_id;for(let $=0;$<c;$++){const B=$*5242880,K=Math.min(B+5242880,r.size),ee=r.slice(B,K),Q=new FormData;if(Q.append("chunk",new Blob([ee],{type:r.type})),(await H.post(`chunk/upload/chunk/${F}/${$}`,Q,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:Oe=>{const We=Math.round(($*5242880+Oe.loaded)*100/r.size);k.value=We}})).code!==200)throw new Error(`åˆ‡ç‰‡ ${$} ä¸Šä¼ å¤±è´¥`)}const R=await H.post(`chunk/upload/complete/${F}`,{expire_value:i.value?parseInt(i.value):1,expire_style:d.value});if(R.code!==200)throw new Error("å®Œæˆä¸Šä¼ å¤±è´¥");return R}catch(a){throw console.error("åˆ‡ç‰‡ä¸Šä¼ å¤±è´¥:",a),(s=(e=a.response)==null?void 0:e.data)!=null&&s.detail?_.showAlert(a.response.data.detail,"error"):_.showAlert("ä¸Šä¼ å¤±è´¥,è¯·ç¨åé‡è¯•","error"),a}},Pe=async r=>{const e=new FormData,s={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:c=>{const T=Math.round(c.loaded*100/c.total);k.value=T}};return e.append("file",r),e.append("expire_value",i.value),e.append("expire_style",d.value),await H.post("share/file/",e,s)},Ue=async()=>{if(!C.value)throw new Error("éŸ³é¢‘æ–‡ä»¶ä¸ºç©º");const r=f.value.trim()||"æˆ‘çš„å½•éŸ³",e=m.value;try{const s=new FormData;return s.append("audio_file",C.value,`${r}.webm`),s.append("name",r),s.append("duration",e.toString()),s.append("format","webm"),s.append("expire_value",i.value),s.append("expire_style",d.value),await H.post("share/audio/",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:c=>{const T=Math.round(c.loaded*100/c.total);k.value=T}})}catch(s){throw console.error("éŸ³é¢‘ä¸Šä¼ å¤±è´¥:",s),s}},je=()=>D.openUpload===0&&localStorage.getItem("token")===null?(_.showAlert("æ¸¸å®¢ä¸Šä¼ åŠŸèƒ½å·²å…³é—­","error"),!1):!0,Be=r=>r.size>D.uploadSize?(_.showAlert(`æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶ (${we(D.uploadSize)})`,"error"),z.value=null,!1):!0,ge=(r,e)=>{if(r==="forever"||r==="count")return!0;const s=D.max_save_seconds||0;if(s===0)return!0;let a=0;switch(r){case"minute":a=parseInt(e)*60;break;case"hour":a=parseInt(e)*3600;break;case"day":a=parseInt(e)*86400;break;default:return!1}return a<=s},Z=()=>!(!je()||g.value==="file"&&z.value&&!Be(z.value)||!ge(d.value,i.value)),Ee=async()=>{var r,e;if(g.value==="file"&&!z.value){_.showAlert("è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶","error");return}if(g.value==="text"&&!p.value.trim()){_.showAlert("è¯·è¾“å…¥è¦å‘é€çš„æ–‡æœ¬","error");return}if(g.value==="audio"&&!C.value){_.showAlert("è¯·å…ˆå½•åˆ¶éŸ³é¢‘","error");return}if(d.value!=="forever"&&!i.value){_.showAlert("è¯·è¾“å…¥è¿‡æœŸå€¼","error");return}if(!ge(d.value,i.value)){const s=Math.floor(D.max_save_seconds/86400);_.showAlert(`è¿‡æœŸæ—¶é—´ä¸èƒ½è¶…è¿‡${s}å¤©`,"error");return}try{let s;if(g.value==="file")D.enableChunk?s=await Fe(z.value):s=await Pe(z.value);else if(g.value==="text"){const a=new FormData;a.append("text",p.value),a.append("expire_value",i.value),a.append("expire_style",d.value),s=await H.post("share/text/",a,{headers:{"Content-Type":"multipart/form-data"}})}else g.value==="audio"&&(s=await Ue());if(s&&s.code===200){const a=s.detail.code,c=s.detail.name;let T="",F="";g.value==="text"?(T=`${(p.value.length/1024).toFixed(2)} KB`,F="ğŸ“"):g.value==="audio"?(T=`${((C.value?C.value.size:0)/1024).toFixed(2)} KB`,F="ğŸµ"):(T=`${(z.value.size/(1024*1024)).toFixed(1)} MB`,F="ğŸ“");const R={id:Date.now(),filename:`${F} ${c}`,date:new Date().toISOString().split("T")[0],size:T,expiration:d.value==="forever"?"æ°¸ä¹…":`${i.value}${ce()}åè¿‡æœŸ`,retrieveCode:a};v.addShareData(R);let $="";g.value==="audio"?$=`éŸ³é¢‘å‘é€æˆåŠŸï¼æ—¶é•¿: ${de(m.value)}ï¼Œå–ä»¶ç ï¼š${a}`:$=`${g.value==="file"?"æ–‡ä»¶":"æ–‡æœ¬"}å‘é€æˆåŠŸï¼å–ä»¶ç ï¼š${a}`,_.showAlert($,"success"),z.value=null,p.value="",ie(),k.value=0,M.value=R,await ye(a)}else throw new Error("æœåŠ¡å™¨å“åº”å¼‚å¸¸")}catch(s){console.error("å‘é€å¤±è´¥:",s),(e=(r=s.response)==null?void 0:r.data)!=null&&e.detail?_.showAlert(s.response.data.detail,"error"):_.showAlert("å‘é€å¤±è´¥,è¯·ç¨åé‡è¯•","error")}finally{k.value=0}},Ve=()=>{V.push("/")},pe=()=>{S.value=!S.value},He=r=>{M.value=r},Le=r=>{const e=v.shareData.findIndex(s=>s.id===r);e!==-1&&v.deleteShareData(e)},Ne=window.location.origin+"/#/",qe=r=>`${Ne}?code=${r.retrieveCode}`,ve=r=>{const s=(parseInt(i.value)||0)+r;s>=1&&(i.value=s.toString())};return _e(()=>{console.log("SendFileView mounted")}),(r,e)=>{const s=Ye("router-link");return b(),x("div",{class:"min-h-screen flex items-center justify-center p-4 overflow-hidden transition-colors duration-300",onPaste:N(Ie,["prevent"])},[t("div",{class:l(["rounded-3xl shadow-2xl overflow-hidden border w-full max-w-md transition-colors duration-300",[o(n)?"bg-white bg-opacity-10 backdrop-filter backdrop-blur-xl border-gray-700":"bg-white border-gray-200"]])},[t("div",vt,[t("h2",{class:l(["text-3xl font-extrabold text-center mb-8 cursor-pointer transition-colors duration-300",[o(n)?"text-transparent bg-clip-text bg-gradient-to-r from-indigo-300 via-purple-300 to-pink-300":"text-indigo-600"]]),onClick:Ve},A(o(D).name),3),t("form",{onSubmit:N(Ee,["prevent"]),class:"space-y-8"},[t("div",ft,[t("button",{type:"button",onClick:e[0]||(e[0]=a=>g.value="file"),class:l(["px-3 py-2 rounded-lg text-sm",g.value==="file"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"])}," å‘é€æ–‡ä»¶ ",2),t("button",{type:"button",onClick:e[1]||(e[1]=a=>g.value="text"),class:l(["px-3 py-2 rounded-lg text-sm",g.value==="text"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"])}," å‘é€æ–‡æœ¬ ",2),t("button",{type:"button",onClick:e[2]||(e[2]=a=>g.value="audio"),class:l(["px-3 py-2 rounded-lg text-sm",g.value==="audio"?"bg-indigo-600 text-white":"bg-gray-700 text-gray-300"])}," éŸ³é¢‘å½•åˆ¶ ",2)]),y(oe,{name:"fade",mode:"out-in"},{default:q(()=>[g.value==="file"?(b(),x("div",mt,[t("div",{class:l(["rounded-xl p-8 flex flex-col items-center justify-center border-2 border-dashed transition-all duration-300 group cursor-pointer relative",[o(n)?"bg-gray-800 bg-opacity-50 border-gray-600 hover:border-indigo-500":"bg-gray-100 border-gray-300 hover:border-indigo-500"]]),onClick:$e,onDragover:e[3]||(e[3]=N(()=>{},["prevent"])),onDrop:N(De,["prevent"])},[t("input",{id:"file-upload",type:"file",class:"hidden",onChange:Ae,ref_key:"fileInput",ref:h},null,544),k.value>0?(b(),x("div",ht,[y(pt,{progress:k.value},null,8,["progress"])])):P("",!0),y(o(dt),{class:l(["w-16 h-16 transition-colors duration-300",o(n)?"text-gray-400 group-hover:text-indigo-400":"text-gray-600 group-hover:text-indigo-600"])},null,8,["class"]),t("p",{class:l(["mt-4 text-sm transition-colors duration-300 w-full text-center",o(n)?"text-gray-400 group-hover:text-indigo-400":"text-gray-600 group-hover:text-indigo-600"])},[t("span",yt,A(z.value?z.value.name:"ç‚¹å‡»æˆ–æ‹–æ”¾æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ "),1)],2),t("p",{class:l(["mt-2 text-xs",o(n)?"text-gray-500":"text-gray-400"])}," æ”¯æŒå„ç§å¸¸è§æ ¼å¼ï¼Œæœ€å¤§"+A(o(we)(o(D).uploadSize)),3)],34)])):g.value==="text"?(b(),x("div",xt,[t("div",bt,[J(t("textarea",{id:"text-content","onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a),rows:"7",class:l(["flex-grow px-4 py-3 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-300 resize-none",o(n)?"bg-gray-800 bg-opacity-50 text-white":"bg-white text-gray-900 border border-gray-300"]),placeholder:"åœ¨æ­¤è¾“å…¥è¦å‘é€çš„æ–‡æœ¬..."},null,2),[[re,p.value]])])])):g.value==="audio"?(b(),x("div",wt,[t("div",kt,[G.value?P("",!0):(b(),x("div",_t,e[15]||(e[15]=[t("p",{class:"text-yellow-800 text-sm"}," âš ï¸ éŸ³é¢‘å½•åˆ¶åŠŸèƒ½éœ€è¦åœ¨HTTPSç¯å¢ƒä¸‹è¿è¡Œï¼Œæˆ–åœ¨æ”¯æŒçš„æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚ ",-1)]))),G.value?(b(),x("div",St,e[16]||(e[16]=[t("div",{class:"text-blue-800 text-sm space-y-2"},[t("p",{class:"font-medium"},"ğŸ“± æ‰‹æœºå½•éŸ³æç¤ºï¼š"),t("ul",{class:"list-disc list-inside space-y-1 text-left"},[t("li",null,"ç¡®ä¿ç½‘ç«™ä½¿ç”¨HTTPSåè®®"),t("li",null,"ç‚¹å‡»å½•éŸ³æŒ‰é’®æ—¶å…è®¸éº¦å…‹é£æƒé™"),t("li",null,"å¦‚æœæƒé™è¢«æ‹’ç»ï¼Œç‚¹å‡»åœ°å€æ çš„ğŸ”’æˆ–ğŸ¤å›¾æ ‡é‡æ–°æˆæƒ"),t("li",null,"å…³é—­å…¶ä»–å¯èƒ½å ç”¨éº¦å…‹é£çš„åº”ç”¨")])],-1)]))):P("",!0),t("button",{type:"button",onClick:Te,disabled:!G.value,class:l(["w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg hover:shadow-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",[u.value?"bg-gradient-to-br from-green-500 to-green-600 animate-pulse":"bg-gradient-to-br from-red-500 to-red-600"]])},[(b(),x("svg",Mt,[u.value?(b(),x("path",zt)):(b(),x("path",Tt))]))],10,Ct),t("div",$t,A(de(m.value)),1),C.value?(b(),x("audio",{key:2,src:I.value,controls:"",class:"w-full rounded-lg mb-4"},null,8,At)):P("",!0),t("div",Dt,[t("label",{class:l(["block text-sm font-medium mb-2",o(n)?"text-gray-300":"text-gray-700"])}," å½•éŸ³æ–‡ä»¶å ",2),J(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a),type:"text",placeholder:"æˆ‘çš„å½•éŸ³",class:l(["w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 transition duration-300",o(n)?"bg-gray-800 bg-opacity-50 text-white border border-gray-600":"bg-white text-gray-900 border border-gray-300"])},null,2),[[re,f.value]])]),C.value?(b(),x("div",It,[t("button",{type:"button",onClick:ie,class:l(["flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",[o(n)?"bg-gray-700 text-gray-300 hover:bg-gray-600":""]])}," é‡æ–°å½•åˆ¶ ",2)])):P("",!0)])])):P("",!0)]),_:1}),t("div",Rt,[t("label",{class:l(["text-sm font-medium",o(n)?"text-gray-300":"text-gray-700"])}," è¿‡æœŸæ—¶é—´ ",2),t("div",Ft,[t("div",{class:l(["relative h-11 rounded-xl border transition-all duration-300",o(n)?"bg-gray-800/50 border-gray-700/50 group-hover:border-gray-600":"bg-white border-gray-200 group-hover:border-gray-300"])},[d.value!=="forever"?(b(),x(ae,{key:0},[J(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>i.value=a),type:"number",placeholder:Re(),min:"1",class:l(["w-full h-full px-4 pr-32 rounded-xl placeholder-gray-400 transition-all duration-300","focus:outline-none focus:ring-2 focus:ring-offset-0","[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none","bg-transparent",o(n)?"text-gray-100 focus:ring-indigo-500/70 placeholder-gray-500":"text-gray-900 focus:ring-indigo-500/50 placeholder-gray-400"])},null,10,Pt),[[re,i.value]]),t("div",{class:l(["absolute right-24 top-0 h-full flex flex-col border-l",[o(n)?"border-gray-700/50":"border-gray-200"]])},[t("button",{type:"button",onClick:e[7]||(e[7]=a=>ve(1)),class:l(["flex-1 px-2 flex items-center justify-center transition-all duration-200",[o(n)?"hover:bg-gray-700/50 text-gray-400 hover:text-gray-200":"hover:bg-gray-50 text-gray-500 hover:text-gray-700"]])},e[17]||(e[17]=[t("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})],-1)]),2),t("button",{type:"button",onClick:e[8]||(e[8]=a=>ve(-1)),class:l(["flex-1 px-2 flex items-center justify-center transition-all duration-200",[o(n)?"hover:bg-gray-700/50 text-gray-400 hover:text-gray-200":"hover:bg-gray-50 text-gray-500 hover:text-gray-700"]])},e[18]||(e[18]=[t("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),2)],2)],64)):P("",!0),J(t("select",{"onUpdate:modelValue":e[9]||(e[9]=a=>d.value=a),class:l(["absolute right-0 top-0 h-full appearance-none cursor-pointer","focus:outline-none focus:ring-2 focus:ring-offset-0",d.value==="forever"?"w-full px-4":"w-24 pl-3 pr-8 border-l",o(n)?"text-gray-100 border-gray-700/50 focus:ring-indigo-500/70 bg-gray-800/50":"text-gray-900 border-gray-200 focus:ring-indigo-500/50 bg-white"])},[(b(!0),x(ae,null,fe(o(D).expireStyle,a=>(b(),x("option",{value:a,key:a,class:l([o(n)?"bg-gray-800 text-gray-100":"bg-white text-gray-900"])},A(ce(a)),11,Ut))),128))],2),[[Xe,d.value]]),t("div",{class:l(["absolute pointer-events-none",[d.value==="forever"?"right-3":"right-2","top-1/2 -translate-y-1/2"]])},[(b(),x("svg",{class:l(["w-4 h-4 transition-colors duration-300",[o(n)?"text-gray-400":"text-gray-500"]]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[19]||(e[19]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))],2)],2)])]),t("button",{type:"submit",disabled:!Ce.value,class:"w-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white font-bold py-4 px-6 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-opacity-50 transition-all duration-300 transform hover:scale-105 hover:shadow-lg relative overflow-hidden group disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"},[e[21]||(e[21]=t("span",{class:"absolute top-0 left-0 w-full h-full bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"},null,-1)),t("span",Bt,[y(o(ut),{class:"w-6 h-6 mr-2"}),e[20]||(e[20]=t("span",null,"å®‰å…¨å¯„é€",-1))])],8,jt)],32),t("div",Et,[y(s,{to:"/",class:"text-indigo-400 hover:text-indigo-300 transition duration-300"},{default:q(()=>e[22]||(e[22]=[se(" éœ€è¦å–ä»¶ï¼Ÿç‚¹å‡»è¿™é‡Œ ",-1)])),_:1,__:[22]})])]),t("div",{class:l(["px-8 py-4 bg-opacity-50 flex justify-between items-center",[o(n)?"bg-gray-800":"bg-gray-100"]])},[t("span",{class:l(["text-sm flex items-center",[o(n)?"text-gray-300":"text-gray-800"]])},[y(o(he),{class:"w-4 h-4 mr-1 text-green-400"}),e[23]||(e[23]=se(" å®‰å…¨åŠ å¯† ",-1))],2),t("button",{onClick:pe,class:l(["text-sm hover:text-indigo-300 transition duration-300 flex items-center",[o(n)?"text-indigo-400":"text-indigo-600"]])},[e[24]||(e[24]=se(" å‘ä»¶è®°å½• ",-1)),y(o(rt),{class:"w-4 h-4 ml-1"})],2)],2)],2),y(oe,{name:"drawer"},{default:q(()=>[S.value?(b(),x("div",{key:0,class:l(["fixed inset-y-0 right-0 w-full sm:w-120 bg-opacity-70 backdrop-filter backdrop-blur-xl shadow-2xl z-50 overflow-hidden flex flex-col",[o(n)?"bg-gray-900":"bg-white"]])},[t("div",{class:l(["flex justify-between items-center p-6 border-b",[o(n)?"border-gray-700":"border-gray-200"]])},[t("h3",{class:l(["text-xl font-semibold",[o(n)?"text-white":"text-gray-900"]])}," å‘ä»¶è®°å½• ",2),t("button",{onClick:pe,class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[y(o(me),{class:l(["w-6 h-6",[o(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])])],2),t("div",Vt,[y(Ze,{name:"list",tag:"div",class:"space-y-4"},{default:q(()=>[(b(!0),x(ae,null,fe(ne.value,a=>(b(),x("div",{key:a.id,class:l(["rounded-xl p-4 border transition-all duration-300 hover:shadow-md",[o(n)?"bg-gray-800 bg-opacity-50 border-gray-700 hover:border-gray-600":"bg-gray-50 border-gray-200 hover:border-gray-300"]])},[t("div",Ht,[t("div",Lt,[t("h4",{class:l(["font-medium text-sm truncate",[o(n)?"text-white":"text-gray-900"]])},A(a.filename),3),t("p",{class:l(["text-xs mt-1 truncate",[o(n)?"text-gray-400":"text-gray-500"]])},A(a.size)+" Â· "+A(a.date),3),t("p",{class:l(["text-xs mt-1 truncate",[o(n)?"text-gray-400":"text-gray-500"]])},A(a.expiration),3)]),t("div",Nt,[t("button",{onClick:c=>He(a),class:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},[y(o(nt),{class:l(["w-4 h-4",[o(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])],8,qt),t("button",{onClick:c=>Le(a.id),class:"p-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-900 transition-colors"},[y(o(lt),{class:"w-4 h-4 text-red-500"})],8,Ot)])])],2))),128))]),_:1}),ne.value.length===0?(b(),x("div",Wt,[y(o(xe),{class:l(["w-16 h-16 mx-auto mb-4",[o(n)?"text-gray-600":"text-gray-300"]])},null,8,["class"]),t("p",{class:l([o(n)?"text-gray-400":"text-gray-500"])}," æš‚æ— å‘ä»¶è®°å½• ",2)])):P("",!0)])],2)):P("",!0)]),_:1}),y(oe,{name:"fade"},{default:q(()=>[M.value?(b(),x("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:e[14]||(e[14]=N(a=>M.value=null,["self"]))},[t("div",{class:l(["w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden transform transition-all duration-300",[o(n)?"bg-gray-900":"bg-white"]])},[t("div",{class:l(["px-4 sm:px-6 py-3 sm:py-4 border-b flex justify-between items-center",[o(n)?"border-gray-800 bg-gray-800":"border-gray-100 bg-gray-50"]])},[t("div",Gt,[t("h3",{class:l(["text-base sm:text-lg font-semibold truncate",[o(n)?"text-white":"text-gray-900"]])}," æ–‡ä»¶è¯¦æƒ… ",2),t("button",{onClick:e[10]||(e[10]=a=>M.value=null),class:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"},[y(o(me),{class:l(["w-4 h-4 sm:w-5 sm:h-5",[o(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])])])],2),t("div",Kt,[t("div",{class:l(["rounded-xl p-3 sm:p-4 mb-4 sm:mb-6",[o(n)?"bg-gray-800 bg-opacity-50":"bg-gray-50 bg-opacity-95"]])},[t("div",Qt,[t("div",{class:l(["p-2 sm:p-3 rounded-lg",[o(n)?"bg-gray-800":"bg-white"]])},[y(o(xe),{class:l(["w-5 h-5 sm:w-6 sm:h-6",[o(n)?"text-indigo-400":"text-indigo-600"]])},null,8,["class"])],2),t("div",Jt,[t("h4",{class:l(["font-medium text-sm sm:text-base truncate",[o(n)?"text-white":"text-gray-900"]])},A(M.value.filename),3),t("p",{class:l(["text-xs sm:text-sm truncate",[o(n)?"text-gray-400":"text-gray-500"]])},A(M.value.size)+" Â· "+A(M.value.date),3)])]),t("div",Xt,[t("div",Yt,[y(o(it),{class:l(["w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0",[o(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"]),t("span",{class:l(["text-xs sm:text-sm truncate",[o(n)?"text-gray-300":"text-gray-600"]])},A(M.value.expiration),3)]),t("div",Zt,[y(o(he),{class:l(["w-3.5 h-3.5 sm:w-4 sm:h-4 mr-1.5 sm:mr-2 flex-shrink-0",[o(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"]),t("span",{class:l(["text-xs sm:text-sm truncate",[o(n)?"text-gray-300":"text-gray-600"]])}," å®‰å…¨åŠ å¯† ",2)])])],2),t("div",er,[t("div",tr,[t("div",rr,[t("div",or,[e[25]||(e[25]=t("h4",{class:"font-medium text-sm sm:text-base"},"å–ä»¶ç ",-1)),t("button",{onClick:e[11]||(e[11]=a=>o(ot)(M.value.retrieveCode)),class:"p-1.5 sm:p-2 rounded-full hover:bg-white/10 transition-colors"},[y(o(be),{class:"w-4 h-4 sm:w-5 sm:h-5"})])]),t("p",ar,A(M.value.retrieveCode),1)]),t("div",{class:l(["rounded-xl p-3 sm:p-4",[o(n)?"bg-gray-800 bg-opacity-50":"bg-gray-50 bg-opacity-95"]])},[t("div",sr,[t("h4",{class:l(["font-medium text-sm sm:text-base flex items-center min-w-0",[o(n)?"text-white":"text-gray-900"]])},[y(o(ct),{class:"w-4 h-4 sm:w-5 sm:h-5 mr-1.5 sm:mr-2 text-indigo-500 flex-shrink-0"}),e[26]||(e[26]=t("span",{class:"truncate"},"wgetä¸‹è½½",-1))],2),t("button",{onClick:e[12]||(e[12]=a=>o(at)(M.value.retrieveCode,M.value.filename)),class:"p-1.5 sm:p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex-shrink-0"},[y(o(be),{class:l(["w-4 h-4 sm:w-5 sm:h-5",[o(n)?"text-gray-400":"text-gray-500"]])},null,8,["class"])])]),t("p",{class:l(["text-xs sm:text-sm font-mono break-all line-clamp-2",[o(n)?"text-gray-300":"text-gray-600"]])}," ç‚¹å‡»å¤åˆ¶wgetå‘½ä»¤ ",2)],2)]),t("div",{class:l(["rounded-xl p-4 sm:p-5 flex flex-col items-center",[o(n)?"bg-gray-800 bg-opacity-50":"bg-gray-50 bg-opacity-95"]])},[t("div",nr,[y(st,{value:qe(M.value),size:140,level:"M",class:"sm:w-[160px] sm:h-[160px]"},null,8,["value"])]),t("p",{class:l(["text-xs sm:text-sm truncate max-w-full",[o(n)?"text-gray-400":"text-gray-500"]])}," æ‰«æäºŒç»´ç å¿«é€Ÿå–ä»¶ ",2)],2)])]),t("div",{class:l(["px-4 sm:px-6 py-3 sm:py-4 border-t",[o(n)?"border-gray-800":"border-gray-100"]])},[t("button",{onClick:e[13]||(e[13]=a=>o(ye)(M.value.retrieveCode)),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg text-sm sm:text-base font-medium transition-colors"}," å¤åˆ¶å–ä»¶é“¾æ¥ ")],2)],2)])):P("",!0)]),_:1})],32)}}}),pr=Se(lr,[["__scopeId","data-v-3ed43f23"]]);export{pr as default};
